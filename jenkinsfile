pipeline{
    agent {label 'jenkins-agent'}
    tools {
        jdk 'java17'
        maven 'maven3'
   }
   stages{
       satge("Cleanup Workspace"){
               steps {
               cleanWs()
               }
    }
    
    stage("checkout from scm"){
           steps {
              git branch: 'master', credentialsId: 'github', url: 'https://github.com/eduru-shiva/tomcat-deployment.git'
           }

    }

    stage("Build Application"){
       steps {
          sh "mvn clean package"
       }

    }

    stage("Test Application"){
       steps {
            sh "mvn test"
         }
      }
  }
}
